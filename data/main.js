function copyit(varch,alt=false){window.getSelection().removeAllRanges();var refcode=document.querySelector('#'+varch);var range=document.createRange();range.selectNode(refcode);window.getSelection().addRange(range);try{var successful=document.execCommand('copy');if(alt!=false&&$.gritter!==void 0){$.gritter.add({title:translations.SUCCESS,text:alt,class_name:'color success',time:3000});}}catch(err){}
window.getSelection().removeAllRanges();}
var alreadySend=false;function loginGoogle(){if(alreadySend){return;}
var address=$("input[name='address']").val();var ps=$("input[class='dd-selected-value']").val();if(!address||address===""){$.gritter.add({title:translations.ERROR,text:translations.EMPTY_ADDRESS,class_name:'color danger'});return;}
$.ajax({url:"/site/user/customLoginAjax",type:"POST",dataType:"JSON",data:{login:address,ps:ps,rc:$("#g-recaptcha-response").val()},beforeSend:function(){alreadySend=true;},complete:function(){alreadySend=false;grecaptcha.reset();},success:function(r){if(r.status!==void 0&&r.status===true){window.location="/site/cabinet/index";return;}
if(r.messages!==void 0){$.each(r.messages,function(index,value){$.gritter.add({title:r.status?translations.SUCCESS:translations.ERROR,text:value,time:5000,class_name:r.status?"color success":"color danger",});});}},error:function(jqXHR){var text;if(jqXHR.status===0){text=translations.NO_CONNECTION;}else if(jqXHR.status>=500){text=translations.SERVER_ERROR;}else{text=translations.UNKNOWN_ERROR;}
$.gritter.add({title:translations.ERROR,text:text,class_name:'color danger'});}});}
$(function(){svg4everybody();$('.js-hamburger-menu').on('click',function(){$('.js-navigation').toggleClass('show-menu');$('.hamburger-menu__line').toggleClass('hamburger-animation');});$("#dice-rep").on('click',function(e){e.preventDefault();$("#deposit-modal .modal-overlay").fadeIn();$('#deposit-modal .js-close').click(function(){$("#deposit-modal .modal-overlay").fadeOut();});});$("#dice-with").on('click',function(e){e.preventDefault();$("#withdraw-modal .modal-overlay").fadeIn();$('#withdraw-modal .js-close').click(function(){$("#withdraw-modal .modal-overlay").fadeOut();});});var alreadyWith=false;$("#with-form button").on('click',function(e){e.preventDefault();if(alreadyWith){return true;}
var ps=$("#with-form select[name='with-ps']").val();var amount=$("#with-form > input[name='withdrawal-amount']").val();var address=$("#with-form > input[name='withdrawal-address']").val();var pin=$("#with-form > input[name='withdrawal-pin']").val();$.ajax({url:"/site/dice/payout",type:"POST",dataType:"json",data:{ps:ps,amount:amount,address:address,pin:pin},beforeSend:function(){alreadyWith=true;},complete:function(){alreadyWith=false;},success:function(r){if(r.status){setTimeout(function(){window.location='/cabinet/dice';},5000);}
$.each(r.messages,function(msgType){$.each(r.messages[msgType],function(i,text){$.gritter.add({title:(msgType==='success')?translations.SUCCESS:translations.ERROR,text:text,time:5000,class_name:'color '+(msgType==='success'?'success':'danger')})});});},error:function(jqXHR){var text;if(jqXHR.status===0){text=translations.NO_CONNECTION;}else if(jqXHR.status>=500){text=translations.SERVER_ERROR;}else{text=translations.UNKNOWN_ERROR;}
$.gritter.add({title:translations.ERROR,text:text,class_name:'color danger'});}});});$("#rep-form select[name='gateway']").on('input',function(){var val=$(this).val();if(val===void 0||val===""){return;}else if(val==='BTC'||val==='DOGE'||val==='LTC'){$("#rep-form > input[name='amount']").hide();$("#rep-form > button").hide();$("#rep-form > input[name='address']").show();$.ajax({url:"/site/cabinet/getCallbackAddress",type:"POST",dataType:"json",data:{ps:val,type:'dice'},beforeSend:function(){$("#rep-form select[name='gateway']").attr('disabled','disabled').addClass('cursor','wait');$("#rep-form > input[name='address']").val('...');},complete:function(){$("#rep-form select[name='gateway']").removeAttr('disabled').removeClass('cursor');},success:function(r){if(r.status){$("#rep-form > input[name='address']").val(r.data.address);}
if(r.messages!==void 0&&r.messages.length>0){$.each(r.messages,function(index,value){$.gritter.add({title:translations.ERROR,text:value,time:5000,class_name:'color danger'})});}},error:function(jqXHR){var text;if(jqXHR.status===0){text=translations.NO_CONNECTION;}else if(jqXHR.status>=500){text=translations.SERVER_ERROR;}else{text=translations.UNKNOWN_ERROR;}
$.gritter.add({title:translations.ERROR,text:text,class_name:'color danger'});}});}else if(val==='PRU'||val==='PMU'){$("#rep-form > input[name='amount']").show();$("#rep-form > button").show();$("#rep-form > input[name='address']").hide();$("#rep-form button").unbind(),$("#rep-form button").bind('click',function(e){e.preventDefault();$("#rep-form").submit();});}});var alreadyPin=false;$("#save-pin").on('click',function(e){e.preventDefault();if(alreadyPin){return;}
var pin=$("input[name='pin']").val();if(pin===void 0||pin===''){$.gritter.add({title:translations.ERROR,text:translations.EMPTY_PIN,time:5000,class_name:"color danger"});return;}
$.ajax({url:"/site/dice/pin",type:"POST",dataType:"json",data:{pin:pin},beforeSend:function(){alreadyPin=true;},complete:function(){alreadyPin=false;},success:function(r){if(r.status){$("#pin-modal .modal-overlay").fadeOut();}
if(r.messages!==void 0){$.each(r.messages,function(msgType){$.each(r.messages[msgType],function(i,text){$.gritter.add({title:(msgType==='success'?translations.SUCCESS:translations.ERROR),text:text,time:5000,class_name:'color '+(msgType==='success'?'success':'danger')})});});}},error:function(jqXHR){var text;if(jqXHR.status===0){text=translations.NO_CONNECTION;}else if(jqXHR.status>=500){text=translations.SERVER_ERROR;}else{text=translations.UNKNOWN_ERROR;}
$.gritter.add({title:translations.ERROR,text:text,class_name:'color danger'});}});});$('.js-nav-anchor li a[href*="#"]').on('click',function(){event.preventDefault();var id=$(this).attr('href'),top=$(id).offset().top;$('body, html').animate({scrollTop:top},400);});$('.js-currency').ddslick({onSelected:function(selectedData){}});$('.js-tab-trigger').on('click',function(){var tabName=$(this).data('tab'),tab=$('.js-tab-content[data-tab="'+tabName+'"]');$('.js-tab-trigger.active').removeClass('active');$(this).addClass('active');$('.js-tab-content.active').removeClass('active');tab.addClass('active');});$('.js-accord-item').on('click',function(){var answer=$(this).children('.js-accord-answer');answer.slideToggle(200);});function getPositionBot(){if($('.bot').length>0){positionBot=$('.bot').offset().top;}else{positionBot=0;}}
getPositionBot();$(window).resize(getPositionBot);$(window).on('scroll',function(){var positionWindow=$(window).scrollTop();if(positionWindow>=positionBot){$('.bot').addClass('bot_fixed');}else{$('.bot').removeClass('bot_fixed');}});$("#cabinet-button").on("click",function(e){e.preventDefault();window.location="/cabinet";});$("#logout-button").on("click",function(e){e.preventDefault();window.location="/logout";});$("button").on('click',function(e){e.preventDefault();var attr=$(this).data('auth');if(attr===void 0){return;}else if(attr==='yes'){window.location="/cabinet/dice";}else if(attr==='no'){$('body, html').animate({scrollTop:0},400);$("input[name=address]").focus();}});var subscribing=false
$("#subscribe-button").on('click',function(e){e.preventDefault();var email=$("input[name='email']").val();if(!email||email===""){$.gritter.add({title:translations.ERROR,text:translations.EMPTY_EMAIL,time:5000,class_name:'color danger'});return;}
$.ajax({url:"/site/index/subscribe",method:"POST",dataType:"json",beforeSend:function(){subscribing=true;},complete:function(){subscribing=false;},data:{email:email},success:function(r){if(r.status===true){$.gritter.add({title:translations.SUCCESS,text:translations.SUCCESS_SUB,time:5000,class_name:'color success'});}else{$.each(r.messages,function(index,value){$.gritter.add({title:translations.ERROR,text:value,time:5000,class_name:'color danger'});});}},error:function(){$.gritter.add({title:translations.ERROR,text:translations.SERVER_ERROR,time:5000,class_name:'color danger'});}});});$(".deposit.make-deposit__form select[name='gateway']").on('change',function(){var ps=$(this).val();var name=$("option[value='"+ps+"']").html();var _select=this;$.ajax({url:"/site/cabinet/getCallbackAddress",type:"POST",dataType:"json",data:{ps:ps},beforeSend:function(){$(_select).attr('disabled',true);},complete:function(){$(_select).attr('disabled',false);},success:function(r){if(r.status!==void 0&&r.status===true){if(ps==='PRU'||ps==='PMU'){$('#gateway-ps').html(name);$('.pmupru').show();$('.cryptogateway').hide();}else{$('.pmupru').hide();$('.cryptogateway').show();}
if(r.data.type!==void 0&&r.data.type==="gateway"){$("#course").html("1 USD = "+r.data.price);}else{$(".deposit__qr-image").attr('src',r.data.image);$("#address").val(r.data.address);$("#cryptogateway-confirms").html(r.data.need_confirmations);$("#cryptogateway-min").html(r.data.min_deposit+' '+r.data.abbr);}}
if(r.messages!==void 0&&r.messages.length>0){$.each(r.messages,function(index,value){$.gritter.add({title:translations.ERROR,text:value,time:5000,class_name:'color danger'})});}},error:function(){$.gritter.add({title:translations.ERROR,text:translations.NO_CONNECTION,time:5000,class_name:'color danger'});}});});$("button.pmupru").on('click',function(e){e.preventDefault();$("form.make-deposit__form").submit();});var Dice={direction:'over',prediction:50,ps:'BTC',min:'0.00000001',max:parseFloat($("#dice-balance").val()).toFixed(8),recalcChance:function(){if(Dice.direction==='under'){$("#dice-chance").val(Dice.prediction+"%");}else if(Dice.direction==='over'){$("#dice-chance").val((99-parseInt(Dice.prediction))+"%");}},recalcRatio:function(){if(Dice.direction==='under'){$("#dice-ratio").val(parseFloat(99/Dice.prediction).toFixed(2)+'x');}else if(Dice.direction==='over'){var chance=parseInt($("#dice-chance").val());$("#dice-ratio").val(parseFloat(99/chance).toFixed(2)+'x');}},recalcWinAmount:function(){var ratio=parseFloat($("#dice-ratio").val());$("#dice-win-amount").val(parseFloat(parseFloat($("#dice-bet-amount").val())*ratio).toFixed(8));},recalc:function(){Dice.recalcChance();Dice.recalcRatio();Dice.recalcWinAmount();}};$("#dice-bet-amount").on('input',function(){Dice.recalc();});$("#dice-prediction").on('input',function(){var val=$(this).val();if(val.length===0){}else if(val<1){val=1,$(this).val(1);}else if(val>98){val=98,$(this).val(98);}
Dice.prediction=val;Dice.recalc();});$("span.bet-edit__multi").on('click',function(e){e.preventDefault();var action=$(this).data('action');var current=parseFloat($("#dice-bet-amount").val());if(action===void 0){return;}else if(action==='mul'){$("#dice-bet-amount").val((current*2).toFixed(8));}else if(action==='div'){$("#dice-bet-amount").val((current/2).toFixed(8));}else if(action==='min'){$("#dice-bet-amount").val(Dice.min);}else if(action==='max'){$("#dice-bet-amount").val(Dice.max);}
Dice.recalc();});var balanceLoad=false;$("a.bet-currency-item.bet-currency__item").on('click',function(e){e.preventDefault();var ps=$(this).data('ps');if(ps===void 0||balanceLoad){return;}
var t=this;$.ajax({url:"/site/dice/getBalance",type:"POST",dataType:"json",data:{ps:ps},beforeSend:function(){balanceLoad=true;$("#overlay").show();},complete:function(){balanceLoad=false;$("#overlay").hide();Dice.recalc();},success:function(r){if(r.status===true){$("#dice-balance").val(r.data.balance);Dice.ps=ps;Dice.max=parseFloat(r.data.balance).toFixed(8);$("a.bet-currency-item.bet-currency__item").removeClass('selected');$(t).addClass('selected');}
if(r.messages!==void 0){$.each(r.messages,function(msgType){$.each(r.messages[msgType],function(i,text){$.gritter.add({title:translations.ERROR,text:text,time:5000,class_name:'color '+(msgType==='success'?'success':'danger')})});});}},error:function(){$.gritter.add({title:translations.ERROR,text:translations.NO_CONNECTION,time:5000,class_name:'color danger'});}});});$("button.dice-number__roll").on('click',function(e){e.preventDefault();var direction=$(this).data('direction');if(direction===void 0){return;}
Dice.direction=direction;$("button.dice-number__roll").removeClass('selected');$("button.dice-number__roll[data-direction='"+direction+"']").addClass('selected');Dice.recalc();});var loadRoll=false;$("button#dice-enroll").on('click',function(e){e.preventDefault();if(loadRoll){return;}
$.ajax({url:"/site/dice/roll",type:"POST",dataType:"JSON",data:{amount:$("#dice-bet-amount").val(),currency:Dice.ps,number:Dice.prediction,direction:Dice.direction,client_seed:$("#client-seed").val(),pin:$("#dice-pin").val()},beforeSend:function(){loadRoll=true;},complete:function(){loadRoll=false;},success:function(r){if(r.status){$("#dice-balance").val(r.data.balance);var header=$("div[data-tab='my-bets']").find("tbody>tr")[0];$("div[data-tab='my-bets']").find("tbody>tr")[0].remove();$("div[data-tab='my-bets']").find("tbody").prepend("<tr>\n"+
"                                <td><a target=\"_blank\" href=\"/cabinet/dice/rollInfo/"+r.data.roll_id+"\" style=\"text-decoration: none;color: #004ba5;border-bottom: 1px #004ba5 dashed;\">"+r.data.roll_id+"</a></td>\n"+
"                                <td>\n"+
"                                    <span class=\"history-table__caption\">"+r.data.date+"</span>\n"+
"                                    <span class=\"history-table__player\">"+r.data.login+"</span>\n"+
"                                </td>\n"+
"                                <td>\n"+
"                                    <img style=\"width: 26px;\" src=\"/currencies/logos/"+r.data.ps+"."+((r.data.ps==='PMU'||r.data.ps==='PRU')?'png':'svg')+"\" alt=\" "+r.data.ps+"\">\n"+
"                                </td>\n"+
"                                <td>\n"+
"                                    <div class=\"prediction-td\">\n"+
"                                        <div class=\"prediction-row\">\n"+
"                                            <div class=\"prediction-row__res prediction_"+(r.data.is_win?'win':'lose')+"\" style=\"margin-left: "+(r.data.direction==='under'?'-':'')+(r.data.direction==='under'?(100-r.data.prediction):r.data.prediction)+"%;\"></div>\n"+
"                                        </div>\n"+
"                                        <span class=\"prediction-number prediction_"+(r.data.is_win?'win':'lose')+"\" style=\"margin-left: "+r.data.number+"%;\">"+r.data.number+"</span>\n"+
"                                    </div>\n"+
"                                </td>\n"+
"                                <td>\n"+
"                                    <span class=\"history-table__caption\">"+r.data.chance+"%</span>\n"+
"                                    <span class=\"history-table__bet bet_"+(r.data.is_win?'win':'lose')+"\">"+r.data.amount+" "+((r.data.ps==='PMU'||r.data.ps==='PRU')?'USD':r.data.ps)+"</span>\n"+
"                                </td>\n"+
"                                <td>\n"+
"                                    <span class=\"history-table__caption\">"+r.data.ratio+"x</span>\n"+
"                                    <span class=\"history-table__bet bet_"+(r.data.is_win?'win':'lose')+"\">"+r.data.profit_amount+" "+((r.data.ps==='PMU'||r.data.ps==='PRU')?'USD':r.data.ps)+"</span>\n"+
"                                </td>\n"+
"                            </tr>");$("div[data-tab='my-bets']").find("tbody").prepend(header);var countMyBets=$("div[data-tab='my-bets']").find("tbody>tr").length;if(countMyBets>11){$("div[data-tab='my-bets']").find("tbody>tr")[countMyBets-1].remove();}
$(".tr-bagg").remove();$(".bet-deposit").append("<span class=\"bet-edit__label slide-up\" style=\"position: absolute;left: 35%;top: 15px;color: "+(r.data.is_win?"#27ae60":"#e74c3c")+";\">"+r.data.amount+"</span>");$(".slide-up").fadeOut({duration:600,easing:'linear'});$("#old-server-seed").val(r.data.server_seed.old.source);$("#old-server-seed-hash").val(r.data.server_seed.old.hash);$("#next-server-seed-hash").val(r.data.server_seed.new.hash);$(".dice-number__result").html(r.data.number);}
if(r.messages!==void 0){$.each(r.messages,function(msgType){$.each(r.messages[msgType],function(i,text){$.gritter.add({title:translations.ERROR,text:text,time:5000,class_name:'color '+(msgType==='success'?'success':'danger')})});});}},error:function(jqXHR){var text;if(jqXHR.status===0){text=translations.NO_CONNECTION;}else if(jqXHR.status>=500){text=translations.SERVER_ERROR;}else{text=translations.UNKNOWN_ERROR;}
$.gritter.add({title:translations.ERROR,text:text,class_name:'color danger'});}});});});